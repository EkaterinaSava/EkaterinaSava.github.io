---
layout: post
title: React Course
---

 :mortar_board: С 14 ноября по 23 декабря 2019 года я буду обучаться на [курсе по React](https://learn.javascript.ru/courses/react) от портала [learn.javascript.ru](https://learn.javascript.ru). Здесь буду вести дневник основных этапов обучения и выполнения домашних заданий, а также записывать важные теоретические материалы. 

* Занятия 2 раза в неделю по пн и чт по полтора часа

* Преподаватель — [Максим Крамаренко](https://learn.javascript.ru/profile/maksym-kramarenko)

_Этот пост существует тут исключительно для личной мотивации, самоконтроля и структурирования материала в голове._


---


<h2 class="post__small-heading">:large_blue_circle: Занятие #0 / Организационное</h2>

**_14/11/2019_**

Первое занятие шло 40 минут и было посвященно общим и организационным вопросам.
К занятию #1 (первому полноценному) в понедельник преподаватель порекомендовал изучить слудующие материалы:

* [Скринкаст по React.js](https://learn.javascript.ru/screencast/react) — как сказал Маским, это единственная обязательная домашка за весь курс (все остальные, по большому счету, по желанию)

* Порекомендовал освежить в памяти 4 крупные темы из [учебника по Javascript](https://learn.javascript.ru/):

    + [Деструктуризация](https://learn.javascript.ru/destructuring-assignment)

    + [Классы](https://learn.javascript.ru/class)

    + [Промисы](https://learn.javascript.ru/async)

    + [Модули](https://learn.javascript.ru/modules)

* При отсутствии знаний и наличии времени — посмотреть скринкасты:

    + по [гиту](https://learn.javascript.ru/screencast/git)

    + и [вебпаку](https://learn.javascript.ru/screencast/webpack)

<hr class="small">

### :small_blue_diamond: Домашка #0

<h5 class="post__underlined-heading">Скринкаст</h5>

<div class="post__block post__block--left-space">
    <p>Посмотрела 2 раза и написала код.</p>
    <p>Мой код живет <a href="https://github.com/EkaterinaSava/react__screencast">тут</a></p>
    <p>А оригинальный код автора курса — <a href="https://github.com/javascriptru/react-screencast-code">здесь</a></p>
</div>


---


<h2 class="post__small-heading">:large_blue_circle: Занятие #1</h2>

**_18/11/2019_**

__Продолжительность:__ 1 час 55 минут

__Краткое содержание:__

+ Заинитили новый проект через `create-react-app`

+ Создали ряд компонентов: `app`, `restaurants`, `dishes` и `dish`

+ Написали эти компоненты в разных стилях: через классы и через функции

+ Рассмотрели хуки, написали кастомный хук

+ Подключили к проекту сторонний фреймворк `Ant` для стилизации проекта

__Ссылки от преподавателя__ по темам первого занятия:

+ [Create React App](https://github.com/facebook/create-react-app)

+ [Husky для прекоммит-хуков](https://www.npmjs.com/package/husky)

+ [Dev-сервер Вебпака](https://webpack.js.org/configuration/dev-server/)

+ [Жизненные циклы Реакта](http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)

+ [Теория о Javascript-модулях](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules)

+ [Введение в react-хуки](https://reactjs.org/docs/hooks-intro.html)

+ [Документация фреймворка Ant Design](https://ant.design/)


Плюс ссылка на [репозиторий нашего учебного проекта](https://github.com/Ta4i/react-2019-11-14), в нем же — описание первого домашнего задания, а также алгоритма по которому нужно его делать.

<hr class="small">

### :small_blue_diamond: Домашка #1

__Задание:__
1. Реализовать компоненту Restautant (class/func);
2. Вывести средний рейтинг ресторана с помощью компоненты [Rate](https://ant.design/components/rate/);
3. Вывести список отзывов;
4. * Сделать наше приложение красивее с помощью компонент [https://ant.design/](https://ant.design/);

Мой форкнутый репозиторий — [https://github.com/EkaterinaSava/react-2019-11-14](https://github.com/EkaterinaSava/react-2019-11-14)

Моя ветка с первым д/з — [home-work-1](https://github.com/EkaterinaSava/react-2019-11-14/tree/home-work-1)

Кроме этого залила первую домашку через Firebase на хостинг [https://react-course-hw-1-by-sava.firebaseapp.com](https://react-course-hw-1-by-sava.firebaseapp.com)

Ссылка на пулл-реквест — [https://github.com/Ta4i/react-2019-11-14/pull/9](https://github.com/Ta4i/react-2019-11-14/pull/9)


---


<h2 class="post__small-heading">:large_blue_circle: Занятие #2</h2>

**_21/11/2019_**

__Продолжительность:__ 1 час 50 минут

__Краткое содержание:__

+ Прошлись по основным моментам домашнего задания, обсудили ошибки и возможные улучшения

+ Рассмотрели, что такое `defaultProps` и добавили пример к компоненту

+ Подключили пакет `prop-types` и добавили `propTypes` для компонента рейтинга

+ Рассмотрели "хук" `componentDidCatch` и пример с его использованием

+ Подключили к проекту пакет `enzyme` и адаптер для него

+ Написали тест с помощью `Jest` и `Enzyme` для компонента ресторана

+ Рассмотрели асинхронные тесты

<hr class="small">

### :small_blue_diamond: Домашка #2

__Задание:__
1. Покрыть тестами блюда;
2. Написать PropTypes для компонент (сколько хватит сил).

Моя ветка со вторым д/з — [home-work-2](https://github.com/EkaterinaSava/react-2019-11-14/tree/home-work-2)

Ссылка на пулл-реквест — [https://github.com/Ta4i/react-2019-11-14/pull/21](https://github.com/Ta4i/react-2019-11-14/pull/21)


---


<h2 class="post__small-heading">:large_blue_circle: Занятие #3</h2>

**_25/11/2019_**

__Продолжительность:__ 1 час 50 минут

__Краткое содержание:__

+ Прошлись по основным моментам домашнего задания, обсудили тесты и `propTypes`

+ Добавили компонент корзины `cart-badge` в хэдэр

+ Добавили в проект `redux`

+ Использовали в `App`-компоненте `Provider` и `store`

+ Создали компонент `Counter` и несколько редьюсеров

+ Переделали получение данных о ресторанах, теперь они берутся из `store`

+ Добавили корзине возможность читать данные из `store` о количестве блюд

<hr class="small">

### :small_blue_diamond: Домашка #3

__Задание:__
1. Реализовать удаление блюда с корзины;
2. Создать компоненту Order, в которой выводить все блюда с корзины с названием и стоимостью, и выводить общую стоимость.

Моя ветка с третьим д/з — [home-work-3](https://github.com/EkaterinaSava/react-2019-11-14/tree/home-work-3)

Ссылка на пулл-реквест — [https://github.com/Ta4i/react-2019-11-14/pull/32](https://github.com/Ta4i/react-2019-11-14/pull/32)*

_*К сожалению, я сделала только первую часть д/з, мне не хватило времени к обозначенному для д/з сроку разобраться как делать второе задание, оно показалось мне порядочно сложное. Не поняла как правильно как брать данные о выбранных блюдах из стора._


---


<h2 class="post__small-heading">:large_blue_circle: Занятие #4</h2>

**_28/11/2019_**

__Продолжительность:__ 1 час 45 минут

__Краткое содержание:__

+ Прошлись по основным моментам домашнего задания

+ Изменили стуктуру наших (замоканых) данных, теперь они "нормализованы"

+ Добавили так называемые `selectors` и специальный npm-пакет `reselect` в проект

+ Переделали компонент `Dishes` в связи с новой структурой данных

+ Рассмотрели такую сущность как `middleware`

+ Добавили в компонент `Review` форму для отзывов

+ Добавили в проект пакет `redux-devtools-extension` и рассмотрели как он работает


<hr class="small">

### :small_blue_diamond: Домашка #4

__Задание:__
1. Починить Reviews и AverageRating;
2. Добавлять отзыв к ресторану;
3. Надо генерировать id комментария и нового пользователя в middlewares.

Моя ветка с четвертым (только треть) д/з — [home-work-4](https://github.com/EkaterinaSava/react-2019-11-14/tree/home-work-4)

_Ссылки на пулл-реквест в этот раз нет: я перестала в какой-то момент понимать, что происходит в проекте, попыталась сделать д/з и частично (на треть) сделала, но потом окончательно запуталась и не смогла закончить_


---


<h2 class="post__small-heading">:large_blue_circle: Занятие #5</h2>

**_05/12/2019_**

__Продолжительность:__ 1 час 55 минут

__Краткое содержание:__

+ Прошлись по основным моментам домашнего задания

+ Добавили в проект простой сервер, который умеет отдавать данные (чтобы мы могли делать к нему запрос), он находится в отдельной папке `/simple_api`, где лежат моки данных и простой скрипт, отдающий эти данные

+ Добавили в дев-зависимости npm-пакет `concurrently`, чтобы можно было одновременно запускать прокси-сервер с api и обычные npm-скрипты для разработки проекта

+ Рассмотрели и добавили в проект такие библиотеки как `immer` (пример в `reducers/restaurants.js`) и `immutable` (привер в `reducers/reviews.js`), добавили их в проект

+ Переделали получение ресторанов через `fetch`

+ Рассмотрели и добавили в проект `redux-thunk`

+ Переделалаи получение блюд через `fetch`

<hr class="small">

### :small_blue_diamond: Домашка #5

__Задание:__
1. Загружать с сервера отзывы и пользователей.

Моя ветка с пятым д/з — [home-work-5](https://github.com/EkaterinaSava/react-2019-11-14/tree/home-work-5)

Ссылка на пулл-реквест — [https://github.com/Ta4i/react-2019-11-14/pull/52](https://github.com/Ta4i/react-2019-11-14/pull/52)


---


<h2 class="post__small-heading">:large_blue_circle: Занятие #6</h2>

**_09/12/2019_**

__Продолжительность:__ 1 час 25 минут

__Краткое содержание:__

+ Прошлись по основным моментам домашнего задания

+ Добавили в проект роутер — установили npm-пакет `react-router-dom`

+ Обсудили типы роутеров, использовали в компоненте `App` такой вид роутера как `BrowserRouter`

+ Рассмотрели разницу между `Link` и `NavLink`, добавили в компонент `Restaurants Navigation` роут-ссылки типа `NavLink`

+ Добавили примеры страниц (для `counter` и для `restaurants`) и использовали `Switch` для переключения между ними

+ Рассмотрели принципы работы атрибутов `exact` и `strict` для компонента `<Route>`

<hr class="small">

### :small_blue_diamond: Домашка #6

__Задание:__
1. Создать страницу Order на которую можно переходить по клику на кнопку "Order" в корзине;
2. Создать страницу OrderComplete.

Моя ветка с шестым д/з — [home-work-6](https://github.com/EkaterinaSava/react-2019-11-14/tree/home-work-6)

Ссылка на пулл-реквест — [https://github.com/Ta4i/react-2019-11-14/pull/53](https://github.com/Ta4i/react-2019-11-14/pull/53)


---


<h2 class="post__small-heading">:large_blue_circle: Занятие #7</h2>

**_12/12/2019_**

__Продолжительность:__ 1 час 30 минут

__Краткое содержание:__

+ Прошлись по домашнему заданию

+ Добавили в проект npm-пакеты `connected-react-router` и `history`

+ Создали инстанс `history`, чтобы иметь доступ к `History API`, добавили провайдер и миддлвэр для возможности использовать его

+ Рассмотрели как использовать `ConnectedRouter` и заюзали его возможности в `action-creators`

+ Рассмотрели и использовали `Redirect` из библиотеки `react-router-dom`

+ Поговорили про `children`, создали компоненты `Menu` и `MenuItem` c `props.children`

+ Познакомились со свойством `createContext` из библиотеки самого `react` и рассмотрели пример его использования

<hr class="small">

### :small_blue_diamond: Домашка #7

__Задание:__
1. Реализовать интернационализацию. Хранить выбраный язык в контексте.

Моя ветка с седьмым д/з — [home-work-7](https://github.com/EkaterinaSava/react-2019-11-14/tree/home-work-7)

Ссылка на пулл-реквест — [https://github.com/Ta4i/react-2019-11-14/pull/65](https://github.com/Ta4i/react-2019-11-14/pull/65)


---


<h2 class="post__small-heading">:large_blue_circle: Занятие #8</h2>

**_16/12/2019_**

__Продолжительность:__ 1 час 35 минут

__Краткое содержание:__

+ Прошлись по домашнему заданию

+ Поговорили о работе с сайд-эффектами и о том, что еще, когда и почему можно использовать для работы с ними:

    * [Redux Loop](https://github.com/redux-loop/redux-loop) (для любителей Elm-а)

    * [Redux Observable](https://redux-observable.js.org/) (rxjs в миддлвэрах)

    * [Redux Saga](https://redux-saga.js.org/) (саги = процессы, в которых описаны сайд-эффекты)

+ Рассмотрели варианты организации кода при работе с Redux:

    * мы группировали код по функциональности

    * поговорили о подходе [Redux Ducks](https://github.com/erikras/ducks-modular-redux) — предполагает организацию кода по компонентам или виджетам

+ Рассмотрели другие подходы к стейт-менеджменту:

    * [RxJs](https://rxjs-dev.firebaseapp.com/) (почти не используется сейчас, разве что в мире asp .net)

    * [MobX](https://mobx.js.org/README.html) (мы создаем обсервы, которые смотрят на обсервабл-переменные и следят за их мутациями = изменениями и меняют "магическим" образом очень эффективно компоненты, которые зависят от этих переменных; очень подходит для рендера огромных таблиц, в которых данные созависимы)

+ Поговорили о том, как еще можно получать данные кроме REST API

    * [Falcor](https://netflix.github.io/falcor/)

    * [GraphQL](https://graphql.org) (язык запросов, созданный FB) + [песочница](https://www.apollographql.com/), где можно поучиться делать запросы на нем 

        1. [Relay](https://relay.dev/) — библиотека, которая собирает graphql-запросы вместе и уменьшает кол-во запросов

        2. Альтернатива Relay — [Appolo GraphQL](https://www.apollographql.com/) (очень хорошо типизирован, подходит для проектов на TypeScript)

+ Поговорили о инструментах рендеринга на сервере с помощью [React DOM Server](https://reactjs.org/docs/react-dom-server.html), которая рендерит компоненты в стринги (но есть проблема обогащения приложения данными)

+ Обсудили зачем нужен [React Native](https://facebook.github.io/react-native/)

<hr class="small">

### :small_blue_diamond: Домашка #8

__Задание:__

1. Написать вопросы к преподавателю по Реакту и по курсу

---


<h2 class="post__small-heading">:large_blue_circle: Занятие #9 / Заключительное</h2>

**_19/12/2019_**

__Продолжительность:__ 45 минут

__Краткое содержание:__

Это была секция вопросов-ответов

+ Еще раз прошлись по тому как работает Redux [на схеме](https://camo.githubusercontent.com/5aba89b6daab934631adffc1f301d17bb273268b/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6d656469612d702e736c69642e65732f75706c6f6164732f3336343831322f696d616765732f323438343535322f415243482d5265647578322d7265616c2e676966)

+ Можно ли получать Context до рендера? — Да:

    * использовать декоратор

    * [хук `useContext`](https://reactjs.org/docs/hooks-reference.html#usecontext) для функциональных компонент 
    
    * через `contextType` для классовых компонент

+ Второй аргумент `useEffect` для мемоизации? Да

+ Использование [`localStorage`](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage) в react-приложениях: длительное хранение данных, не замена хранению данных в Redux

+ [PWA с Реакт](https://medium.com/better-programming/build-a-realtime-pwa-with-react-99e7b0fd3270)

+ Что читать? [Блог Дена Абрамова](https://overreacted.io/)

---


Bye-bye, react course! :wave:


---


__С чем нужно разобраться?__

+ Деструктуризация

+ Метод работы с массивами `map`

+ __Мемоизация__

Мемоизация (memoization) — сохранение результатов выполнения функций для предотвращения повторных вычислений.

Это один из способов оптимизации, применяемый для увеличения скорости выполнения компьютерных программ.

Перед вызовом функции проверяется, вызывалась ли функция ранее:
- если не вызывалась, то функция вызывается, и результат её выполнения сохраняется;
- если вызывалась, то используется сохранённый результат.

Идея мемоизации в JavaScript основывается на двух концепциях:
- замыканиях
- и функциях высшего порядка (функциях, которые возвращают другие функции)

Вот случаи, в которых мемоизация реально полезна:
- для дорогостоящих функций, т. е. функций, которые выполняют тяжелые вычисления
- для функций с ограниченным и повторяющимся диапазоном входных данных
- для рекурсивных функций с повторяющимися входными значениями
- для чистых функций (функций, которые возвращают один и тот же результат  для одних и тех же входных данных)

[Мемоизация в JS и ускорение функций](https://habr.com/ru/company/ruvds/blog/332384/)

[Разбираемся с мемоизацией в JavaScript](https://www.cat-in-web.ru/js-memoization/)

Библиотека для создания мемоизированных селекторов для Redux — [Reselect](https://github.com/reduxjs/reselect)

---

<!-- 14/11/2019 -->
